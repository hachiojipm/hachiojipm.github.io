tags: perl
---
# perlのsystemとかexecに配列で渡すと「>」リダイレクトが使えない

そもそもなんでperlのsystem,execっで「>」リダイレクトやれ「|」パイプやれをつかうのよ？ってのはありますが、なんかよくわからなかったのでいろいろ質問して教えてもらったので、メモです。

## 配列で渡すと内部で実行されるexecvpがシェル文字を解釈しないから
[perlのドキュメントのexec関数の説明](http://perldoc.jp/func/exec)によれば、LISTで渡すと、execvpってライブリコールのが呼ばれて、これのexecvpって関数はシェルを経由しないから、シェル特殊文字の「>」「|」などは理解せず実行するためということです。

また、LISTではなくスカラーで渡すとシェルに渡すということらしいです。

ぼくは、OSコマンドインジェクション対策で、perlでsystemやexecを実行するときは、全部LISTで渡すべし！って覚えていたんですが、LISTで渡す意味がやっと正しくわかった気がします。

ちなみに、そもそも、perlのexecでリダイレクト使うと思ったのは、Seleniumで立ち上げたPhantomJSが吐くログがうざかったので、消し去っておきたかったからですね！

        exec 'phantomjs --webdriver=127.0.0.1:9999 > /dev/null';

ちなみに、一応最近のPhantomJSってwebdriverのログを保存する--webdriver-logfileってオプションがあるんですが、これ指定しても、なんか標準出力には出るんですよね、残念ながら。

## execvp(3)の3とかそもそもexecvpって何よ？ライブラリコール？よくわからん・・・
なんかyanchaってチャットサービスで、いろいろ聞いたら、そもそもこの話を含めていろいろ教えてもらった。

- [yanchaでいろいろ教えてもらったログ](http://yancha.hachiojipm.org/quot?id=237434,237435,237437,237438,237439,237440,237441,237442,237443,237444,237445,237446,237447,237448,237449,237451,237452,237455,237456,237457,237459,237460,237461,237462,237463,237464,237465,237477,237479,237482,237485,237486,237487,237488,237489,237497,237498,237500,237501)
- [bool_fool氏オススメの例解UNIXプログラミング教室](http://www.amazon.co.jp/%E4%BE%8B%E8%A7%A3UNIX%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E6%95%99%E5%AE%A4-%E5%86%A8%E6%B0%B8%E5%92%8C%E4%BA%BA/dp/48947126609)
- [manコマンドの使い方(1) とマニュアル:manの探し方](http://takuya-1st.hatenablog.jp/entry/20100504/1272932107)

manで見れるのって全部シェルコマンドだと思っていましたが、いろいろあるんですねー。そもそもmanの見方もにわか仕込みでした。。。ライブラリコール（ライブラリ標準関数）っていうのは要はC言語の関数ってことですかねー。まぁ深く勉強したいところです。

papix,bool_fool++

